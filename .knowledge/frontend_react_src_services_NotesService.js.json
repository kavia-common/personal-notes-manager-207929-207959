{"is_source_file": true, "format": "JavaScript", "description": "This file defines the NotesService class which provides an interface for managing notes. It abstracts data operations using either localStorage or a REST API backend, including methods to list, get, create, update, and remove notes, along with seed data initialization.", "external_files": [], "external_methods": ["fetch"], "published": ["NotesService"], "classes": [{"name": "NotesService", "description": "A class that facilitates CRUD operations on notes, supporting localStorage and REST API backend modes."}], "methods": [{"name": "constructor()", "description": "Initializes the NotesService, setting the API endpoint if environment variables are set, or falling back to local storage with seed data.", "scope": "NotesService", "scopeKind": "class"}, {"name": "ensureSeedData()", "description": "Populates local storage with seed notes data if none exists and marks seed as done.", "scope": "NotesService", "scopeKind": "class"}, {"name": "list()", "description": "Retrieves the list of all notes, either from API or local storage.", "scope": "NotesService", "scopeKind": "class"}, {"name": "get", "description": "Retrieves a note by ID from API or local storage."}, {"name": "create", "description": "Creates a new note with provided data in API or local storage."}, {"name": "update", "description": "Updates an existing note identified by ID with provided patch data."}, {"name": "remove", "description": "Deletes a note by ID from API or local storage."}, {"name": "_lsRead", "description": "Reads notes data from localStorage."}, {"name": "_lsWrite", "description": "Writes notes data to localStorage."}, {"name": "cryptoRandomId()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["fetch"], "search-terms": ["NotesService", "localStorage", "React environment variables", "REST API", "seed data"], "state": 2, "file_id": 15, "knowledge_revision": 31, "git_revision": "", "ctags": [{"_type": "tag", "name": "NotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^export class NotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "SEED_DONE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^const SEED_DONE_KEY = \"notes_app_seed_done_v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^const STORAGE_KEY = \"notes_app_items_v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "arr", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      const arr = JSON.parse(raw);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "await", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      return await res.json();$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "body", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      body: data.body || \"\",$/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      createdAt: now,$/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "cryptoRandomId", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^function cryptoRandomId() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "ensureSeedData", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^  ensureSeedData() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      id: cryptoRandomId(),$/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^  async get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^    const idx = all.findIndex(n => n.id === id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^  async list() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^    const next = all.filter(n => n.id !== id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^    const note = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^    const now = Date.now();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      if (!res.ok) throw new Error(`Failed to get note: ${res.status}`);$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      const raw = localStorage.getItem(STORAGE_KEY);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      const res = await fetch(`${this.endpoint}\\/${encodeURIComponent(id)}`, {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      const res = await fetch(`${this.endpoint}\\/${encodeURIComponent(id)}`, {$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      const res = await fetch(this.endpoint, {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      if (!res.ok) throw new Error(`Failed to get note: ${res.status}`);$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "res", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      return await res.json();$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "throw", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      if (!res.ok) throw new Error(`Failed to get note: ${res.status}`);$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      title: data.title || \"Untitled\",$/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^    const updated = { ...all[idx], ...patch, updatedAt: now };$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^      updatedAt: now,$/", "language": "JavaScript", "kind": "property", "scope": "note", "scopeKind": "class"}, {"_type": "tag", "name": "useApi", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-207929-207959/frontend_react/src/services/NotesService.js", "pattern": "/^    if (this.useApi) {$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}], "hash": "799fd5d6541a3048921b6e7e6c51cc28", "format-version": 4, "code-base-name": "frontend_react", "filename": "frontend_react/src/services/NotesService.js", "fields": [{"name": "return await res.json();", "scope": "NotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "body: data.body || \"\",", "scope": "note", "scopeKind": "class", "description": "unavailable"}, {"name": "createdAt: now,", "scope": "note", "scopeKind": "class", "description": "unavailable"}, {"name": "id: cryptoRandomId(),", "scope": "note", "scopeKind": "class", "description": "unavailable"}, {"name": "async get(id) {", "scope": "NotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "if (!res.ok) throw new Error(`Failed to get note: ${res.status}`);", "scope": "NotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "const res = await fetch(`${this.endpoint}\\/${encodeURIComponent(id)}`, {", "scope": "NotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "title: data.title || \"Untitled\",", "scope": "note", "scopeKind": "class", "description": "unavailable"}, {"name": "updatedAt: now,", "scope": "note", "scopeKind": "class", "description": "unavailable"}, {"name": "if (this.useApi) {", "scope": "NotesService", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"31": ""}]}